{"version":3,"sources":["./src/app/pages/empresas/empresas.component.html","./src/app/pages/empresas/empresas-routing.module.ts","./src/app/pages/empresas/empresas.component.scss","./src/app/pages/empresas/empresas.component.ts","./src/app/pages/empresas/empresas.module.ts"],"names":[],"mappings":"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","file":"pages-empresas-empresas-module-es2015.js","sourcesContent":["export default \"<div class=\\\"row\\\">\\r\\n  <div class=\\\"col-lg-12\\\">\\r\\n    <app-card [loading]=\\\"loading\\\">\\r\\n      <div class=\\\"d-flex justify-content-between align-items-center\\\" header>\\r\\n        <h4>Empresas</h4>\\r\\n        <app-button color=\\\"primary\\\" rounded=\\\"pill\\\" routerLink=\\\"/empresa/cadastro\\\">\\r\\n          <i class=\\\"ri-add-line mr-1\\\"></i> Nova Empresa\\r\\n        </app-button>\\r\\n      </div>\\r\\n      <div body>\\r\\n        <div class=\\\"table-responsive\\\">\\r\\n          <table class=\\\"table table-striped table-borderless\\\">\\r\\n            <thead>\\r\\n              <tr>\\r\\n                <th scope=\\\"col\\\">Logo</th>\\r\\n                <th scope=\\\"col\\\">Empresa</th>\\r\\n                <th scope=\\\"col\\\">Nome Fantasia</th>\\r\\n                <th scope=\\\"col\\\">CNPJ</th>\\r\\n                <th scope=\\\"col\\\">Telefone</th>\\r\\n                <th scope=\\\"col\\\">E-mail</th>\\r\\n                <th scope=\\\"col\\\"></th>\\r\\n              </tr>\\r\\n            </thead>\\r\\n            <tbody>\\r\\n              <tr *ngFor=\\\"let empresa of empresas; let i=index\\\">\\r\\n                <td class=\\\"align-middle\\\">\\r\\n                  <img [src]=\\\"empresa.logo\\\" height=\\\"50px\\\"  alt=\\\"Logo da empresa\\\">\\r\\n                </td>\\r\\n                <td class=\\\"align-middle\\\">{{ empresa.nome_empresa }}</td>\\r\\n                <td class=\\\"align-middle\\\">{{ empresa.nome_fantasia }}</td>\\r\\n                <td class=\\\"align-middle\\\">{{ empresa.cnpj }}</td>\\r\\n                <td class=\\\"align-middle\\\">{{ empresa.fone }}</td>\\r\\n                <td class=\\\"align-middle\\\">{{ empresa.email }}</td>\\r\\n                <td class=\\\"align-middle\\\">\\r\\n                  <div class=\\\"d-flex\\\">\\r\\n                    <app-button class=\\\"mx-1\\\" color=\\\"primary\\\" size=\\\"small\\\" rounded=\\\"circle\\\" [routerLink]=\\\"['/empresa', empresa.id]\\\">\\r\\n                      <i class=\\\"ri-edit-box-line\\\"></i>\\r\\n                    </app-button>\\r\\n                    <app-button class=\\\"mx-1\\\" color=\\\"primary\\\" size=\\\"small\\\" rounded=\\\"circle\\\" (click)=\\\"destroy(empresa)\\\">\\r\\n                      <i class=\\\"ri-delete-bin-line\\\"></i>\\r\\n                    </app-button>\\r\\n                  </div>\\r\\n                </td>\\r\\n              </tr>\\r\\n              <tr *ngIf=\\\"empresas?.length == 0\\\">\\r\\n                <td colspan=\\\"7\\\" class=\\\"text-center\\\">Nenhuma empresa encontrada</td>\\r\\n              </tr>\\r\\n            </tbody>\\r\\n          </table>\\r\\n        </div>\\r\\n      </div>\\r\\n    </app-card>\\r\\n  </div>\\r\\n</div>\\r\\n\";","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { EmpresasComponent } from './empresas.component';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: EmpresasComponent\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class EmpresasRoutingModule { }\r\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL2VtcHJlc2FzL2VtcHJlc2FzLmNvbXBvbmVudC5zY3NzIn0= */\";","import { Component, OnDestroy, OnInit } from '@angular/core';\r\nimport { Subject } from 'rxjs';\r\nimport { AlertHelper } from 'src/app/helpers/alert.helper';\r\nimport { Empresa } from 'src/app/models/empresa';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport { EmpresaService } from 'src/app/services/empresa.service';\r\n\r\n@Component({\r\n  selector: 'app-empresas',\r\n  templateUrl: './empresas.component.html',\r\n  styleUrls: ['./empresas.component.scss']\r\n})\r\nexport class EmpresasComponent implements OnInit, OnDestroy {\r\n  public loading: boolean = false;\r\n  public empresas?: Empresa[];\r\n  private unsubscribe$ = new Subject<void>();\r\n\r\n  constructor(\r\n    private empresaService: EmpresaService,\r\n    private alertHelper: AlertHelper\r\n  ) { }\r\n\r\n  public ngOnInit(): void {\r\n    this.loadEmpresas();\r\n  }\r\n\r\n  public ngOnDestroy(): void {\r\n    this.unsubscribe$.next();\r\n    this.unsubscribe$.complete();\r\n  }\r\n\r\n  public destroy(empresa: Empresa): void {\r\n    this.alertHelper.show(\r\n      'warning',\r\n      `Tem certeza que deseja remover a empresa ${empresa.nome_empresa}?`,\r\n      { showCancelButton: true }\r\n    )\r\n    .then(confirmed => {\r\n      if (confirmed) {\r\n        this.loading = true;\r\n        this.empresaService.delete(empresa)\r\n          .pipe(takeUntil(this.unsubscribe$))\r\n          .subscribe({\r\n            next: () => {\r\n              this.loading = false;\r\n              this.empresas = this.empresas.filter(c => c.id != empresa.id);\r\n            },\r\n            error: () => {\r\n              this.loading = false;\r\n            }\r\n          });\r\n      }\r\n    })\r\n  }\r\n\r\n  private loadEmpresas(): void {\r\n    this.loading = true;\r\n    this.empresaService.list()\r\n      .pipe(takeUntil(this.unsubscribe$))\r\n      .subscribe({\r\n        next: (empresas) => {\r\n          this.loading = false;\r\n          this.empresas = empresas;\r\n        },\r\n        error: () => {\r\n          this.loading = false;\r\n        }\r\n      });\r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { EmpresasRoutingModule } from './empresas-routing.module';\r\nimport { EmpresasComponent } from './empresas.component';\r\nimport { ComponentsModule } from 'src/app/components/components.module';\r\n\r\n@NgModule({\r\n  declarations: [EmpresasComponent],\r\n  imports: [\r\n    CommonModule,\r\n    EmpresasRoutingModule,\r\n    ComponentsModule\r\n  ]\r\n})\r\nexport class EmpresasModule { }\r\n"],"sourceRoot":"webpack:///"}